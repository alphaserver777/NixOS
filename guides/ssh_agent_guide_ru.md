# Руководство по работе с ssh-agent

`ssh-agent` — это фоновая программа, которая хранит приватные ключи, защищенные паролем, в памяти. Когда вы используете SSH-ключ, агент автоматически предоставляет его, избавляя вас от необходимости вводить пароль от ключа каждый раз.

## Как это работает на практике?

1.  Вы открываете терминал. `ssh-agent` уже запущен в фоне.
2.  Вы выполняете команду, требующую SSH-аутентификации (например, `git pull` из приватного репозитория или `ssh user@server`).
3.  Если ключ защищен паролем, система попросит вас ввести его **один раз**.
4.  После успешного ввода пароля `ssh-agent` кэширует расшифрованный ключ.
5.  Все последующие команды, использующие этот же ключ в течение текущей сессии, будут выполняться без запроса пароля.

---

## Основные команды для управления `ssh-agent`

Даже при автоматической настройке, вам могут понадобиться эти команды для ручного управления ключами в агенте.

### Добавление ключа вручную

Если ваш ключ находится не в стандартном месте (например, не `~/.ssh/id_rsa`), вы можете добавить его вручную:

```bash
ssh-add ~/.ssh/my_custom_key
```
Вам будет предложено ввести пароль от этого ключа, после чего он будет добавлен в агент.

### Просмотр добавленных ключей

-   **Показать "отпечатки" (fingerprints) всех ключей в агенте:**
```bash
ssh-add -l
```
Вывод будет выглядеть примерно так:
```
4096 SHA256:AbCdEf.../path/to/your/key (RSA)
```

-   **Показать полные публичные ключи:**
```bash
ssh-add -L
```

### Удаление ключей из агента

-   **Удалить конкретный ключ:**
```bash
ssh-add -d ~/.ssh/my_custom_key
```

-   **Удалить ВСЕ ключи из агента:**
```bash
ssh-add -D
```
После этого при следующем обращении к SSH вам снова потребуется ввести пароль от ключа. Это может быть полезно, если вы отходите от рабочего места.
