# Руководство по использованию GPG в командной строке

GNU Privacy Guard (GPG) — это инструмент для шифрования и подписи данных. Это руководство покрывает базовые операции с GPG в командной строке.

## Содержание

    1.  [Симметричное шифрование (по паролю)](#1-симметричное-шифрование-по-паролю)
    2.  [Асимметричное шифрование (ключевая пара)](#2-асимметричное-шифрование-ключевая-пара)
3.  [Работа с ключами](#3-работа-с-ключами)

    ---

## 1. Симметричное шифрование (по паролю)

    Этот метод использует только парольную фразу для шифрования и дешифрования файла. Он полезен, когда не нужно управлять ключами, а достаточно просто защитить файл паролем.

### Шифрование файла

    Для шифрования файла используется флаг `-c` (`--symmetric`). GPG попросит вас ввести парольную фразу дважды.

    ```bash
    gpg -c имя_файла
    ```

    После выполнения команды будет создан зашифрованный файл с расширением `.gpg` (например, `имя_файла.gpg`).

#### Указание алгоритма шифрования

    Вы можете явно указать алгоритм шифрования. AES256 является надежным выбором.

    ```bash
    gpg -c --cipher-algo AES256 .env.dev
    ```

    Эта команда зашифрует файл `.env.dev`, используя алгоритм AES256, и создаст `.env.dev.gpg`.

### Дешифрование файла

    Для дешифрования используется флаг `-d` (`--decrypt`). GPG запросит парольную фразу, которую вы использовали при шифровании.

    ```bash
# Расшифрует и выведет содержимое в терминал
    gpg -d имя_файла.gpg

# Расшифрует и сохранит результат в новый файл
    gpg -o расшифрованный_файл -d имя_файла.gpg
    ```

    Если вы просто выполните `gpg имя_файла.gpg`, GPG также попытается его расшифровать и сохранить под оригинальным именем.

    ---

## 2. Асимметричное шифрование (ключевая пара)

    Этот метод более безопасен и гибок. Он использует пару ключей:
    *   **Публичный ключ:** Вы делитесь им с другими. Его используют для шифрования файлов *для вас*.
    *   **Приватный ключ:** Вы храните его в секрете. Он используется для дешифрования файлов, зашифрованных вашим публичным ключом.

### Генерация ключевой пары

    Если у вас еще нет ключей, создайте их:

    ```bash
    gpg --full-generate-key
    ```

    Следуйте инструкциям на экране:
    1.  Выберите тип ключа (обычно `RSA and RSA`).
    2.  Укажите размер ключа (рекомендуется `4096` бит).
    3.  Установите срок действия ключа (например, `1y` для одного года или `0` для бессрочного).
    4.  Введите ваше реальное имя и адрес электронной почты.
    5.  Придумайте надежную парольную фразу для защиты вашего приватного ключа.

### Шифрование файла для получателя

    Для шифрования файла вам нужен публичный ключ получателя.

    ```bash
# -e (--encrypt) - шифровать
# -r (--recipient) - указать получателя (по имени или email)
    gpg -e -r "email_получателя@example.com" имя_файла
    ```

    Будет создан файл `имя_файла.gpg`. Расшифровать его сможет только владелец приватного ключа, соответствующего `email_получателя@example.com`.

### Дешифрование файла

    Если файл был зашифрован вашим публичным ключом, вы можете расшифровать его своим приватным ключом.

    ```bash
# Расшифрует и выведет в терминал
    gpg -d файл.gpg

# Расшифрует и сохранит в новый файл
    gpg -o новый_файл -d файл.gpg
    ```

    GPG запросит парольную фразу от вашего приватного ключа.

    ---

## 3. Работа с ключами

### Просмотр ключей

    *   **Показать публичные ключи** в вашей связке:
    ```bash
    gpg -k
# или gpg --list-keys
    ```

    *   **Показать приватные ключи:**
    ```bash
    gpg -K
# или gpg --list-secret-keys
    ```

### Экспорт и импорт публичных ключей

    *   **Экспорт публичного ключа** в текстовом формате (ASCII-armored), чтобы поделиться им:
    ```bash
# Укажите ваш email или ID ключа
    gpg --export --armor "ваш_email@example.com" > my_public_key.asc
    ```
    Файл `my_public_key.asc` можно отправлять кому угодно.

    *   **Импорт публичного ключа** другого человека:
    ```bash
    gpg --import /путь/к/файлу/ключа.asc
    ```
    После импорта вы сможете шифровать файлы для этого человека.
