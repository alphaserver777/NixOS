# Гайд: Различия и использование команд `df` и `du`

Этот гайд объясняет разницу между командами `df` и `du` в Linux и показывает основные примеры их использования для анализа дискового пространства.

## Содержание
- [Ключевое отличие](#ключевое-отличие)
- [`df`: Анализ файловой системы](#df-анализ-файловой-системы)
- [`du`: Анализ использования файлами и каталогами](#du-анализ-использования-файлами-и-каталогами)
- [Почему их показания могут отличаться?](#почему-их-показания-могут-отличаться)
- [Шпаргалка](#шпаргалка)

---

## Ключевое отличие

*   **`df` (disk free)**: Показывает общее состояние **файловой системы** (раздела диска). Отвечает на вопрос: "Сколько всего места и сколько осталось?"
*   **`du` (disk usage)**: Показывает, сколько места занимают **конкретные файлы и каталоги**. Отвечает на вопрос: "Что именно занимает место?"

**Аналогия с парковкой:**
- **`df`** — это табло у въезда на парковку: "Всего мест: 500. Занято: 450. Свободно: 50".
- **`du`** — это сотрудник, который ходит и считает, сколько места заняли машины на конкретном этаже.

---

## `df`: Анализ файловой системы

Используйте `df`, чтобы быстро оценить свободное пространство на всех смонтированных разделах. Команда работает очень быстро, так как читает метаданные файловой системы.

### Основная команда

Показать использование всех дисков в удобном для человека формате (GB, MB, KB):
```bash
df -h
```

### Пример вывода
```
Filesystem      Size  Used Avail Use% Mounted on
/dev/sdb2       228G  164G   53G  76% /
/dev/sdb1       500M  161M  340M  33% /boot
tmpfs           7.8G  320M  7.5G   5% /dev/shm
```
- **`Filesystem`**: Имя раздела.
- **`Size`**: Общий размер.
- **`Used`**: Использованное пространство.
- **`Avail`**: Доступное пространство.
- **`Use%`**: Процент использования.
- **`Mounted on`**: Точка монтирования (куда "подключен" раздел).

---

## `du`: Анализ использования файлами и каталогами

Используйте `du`, чтобы найти, какие именно каталоги и файлы занимают больше всего места. Команда работает медленнее, так как рекурсивно обходит все файлы и суммирует их размеры.

### Основные команды

1.  **Показать общий размер конкретного каталога:**
    Флаг `-s` (summarize) выводит только итоговую сумму, `-h` (human-readable) делает её читаемой.
    ```bash
    du -sh /path/to/directory
    ```
    *Пример:*
    ```bash
    du -sh ~/Downloads
    ```

2.  **Найти самые "тяжелые" каталоги внутри другого каталога:**
    Флаг `--max-depth=1` ограничивает глубину сканирования, показывая размеры только для элементов первого уровня.
    ```bash
    du -h --max-depth=1 /path/to/directory
    ```
    *Пример для поиска больших папок в домашнем каталоге:*
    ```bash
    du -h --max-depth=1 ~
    ```

---

## Почему их показания могут отличаться?

Иногда `df` показывает, что место занято, а `du` не может найти "виновника". Основные причины:

1.  **Открытые удаленные файлы:** Процесс может держать файл открытым, в то время как сам файл уже удален из каталога. `df` будет видеть, что блоки на диске заняты, но `du` не найдет этот файл для подсчета.
2.  **Метаданные файловой системы:** `df` учитывает все пространство, выделенное под файловую систему, включая служебные данные (суперблоки, иноды). `du` считает только "полезный" размер файлов.

---

## Шпаргалка

| Задача | Команда |
| :--- | :--- |
| "Сколько места на диске?" | `df -h` |
| "Сколько весит эта папка?" | `du -sh <папка>` |
| "Какая папка здесь самая большая?" | `du -h --max-depth=1 .` |
